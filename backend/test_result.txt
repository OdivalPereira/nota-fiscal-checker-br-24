============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-7.4.4, pluggy-1.6.0
rootdir: C:\Users\contabil\Documents\Projetos Antigravity\nota-fiscal-checker-br-24\backend
plugins: anyio-4.11.0, cov-4.1.0
collected 0 items / 1 error

=================================== ERRORS ====================================
_____________________ ERROR collecting tests/test_nfe.py ______________________
tests\test_nfe.py:8: in <module>
    from app.main import app
app\main.py:7: in <module>
    Base.metadata.create_all(bind=engine)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\schema.py:5928: in create_all
    bind._run_ddl_visitor(
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py:3251: in _run_ddl_visitor
    with self.begin() as conn:
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\contextlib.py:137: in __enter__
    return next(self.gen)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py:3241: in begin
    with self.connect() as conn:
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py:3277: in connect
    return self._connection_cls(self)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py:143: in __init__
    self._dbapi_connection = engine.raw_connection()
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py:3301: in raw_connection
    return self.pool.connect()
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:447: in connect
    return _ConnectionFairy._checkout(self)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:1264: in _checkout
    fairy = _ConnectionRecord.checkout(pool)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:711: in checkout
    rec = pool._do_get()
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\impl.py:177: in _do_get
    with util.safe_reraise():
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\impl.py:175: in _do_get
    return self._create_connection()
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:388: in _create_connection
    return _ConnectionRecord(self)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:673: in __init__
    self.__connect()
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:899: in __connect
    with util.safe_reraise():
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\pool\base.py:895: in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\create.py:661: in connect
    return dialect.connect(*cargs, **cparams)
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py:629: in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:394: in connect
    await_only(connection),
..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:123: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
=========================== short test summary info ===========================
ERROR tests/test_nfe.py - sqlalchemy.exc.MissingGreenlet: greenlet_spawn has ...
!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
============================== 1 error in 1.00s ===============================
